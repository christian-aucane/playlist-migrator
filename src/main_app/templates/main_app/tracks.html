{% extends "main_app/base.html" %}

{% load render_table from django_tables2 %}
{% load platforms_filters %}

{% block content %}
    <h1>Mes musiques</h1>
    <h2>Plateformes</h2>
        <ul>
            {% for platform in available_platforms %}
                <li>
                    <strong>{{ platform.capitalize }}</strong>
                    {% if user|is_connected_to_platform:platform %}
                        <a href="{% url 'main_app:update_saved_tracks' platform=platform %}">Recharger la liste</a>
                        <a href="{% url 'platforms:disconnect' platform=platform %}">DÃ©connecter</a>
                    {% else %}
                        <a href="{% url 'platforms:auth_redirect' platform=platform %}">Se connecter</a>
                    {% endif %}
                </li>
            {% empty %}
                <p>Aucune plateforme disponible actuellement ...</p>
            {% endfor %}
        </ul>
  <div>
    <!-- TODO : supprimer ce bouton ? -->
      <a href="{% url 'main_app:user_track_clear' %}" style="color: red">Vider la liste</a>
    {% render_table table %}
  </div>
{% endblock %}
